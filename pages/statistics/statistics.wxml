<!-- pages/statistics/statistics.wxml -->
<view class="container">
  <!-- 顶部统计卡片 -->
  <view class="stats-cards">
    <view class="stat-card">
      <view class="stat-value">{{statistics.totalAttend}}</view>
      <view class="stat-label text-comment">总上课次数</view>
    </view>
    <view class="stat-card">
      <view class="stat-value">{{statistics.totalHours}}</view>
      <view class="stat-label text-comment">总训练时长(小时)</view>
    </view>
    <view class="stat-card">
      <view class="stat-value">{{statistics.completionRate}}%</view>
      <view class="stat-label text-comment">完成率</view>
    </view>
  </view>

  <!-- 月份选择器 -->
  <view class="month-picker">
    <picker mode="date" fields="month" value="{{selectedMonth}}" bindchange="onMonthChange">
      <view class="picker">
        {{selectedMonth}} <icon type="arrowright" size="16" color="#999"></icon>
      </view>
    </picker>
  </view>

  <!-- 图表区域 -->
  <view class="charts-section">
    <!-- 课程类型分布 -->
    <view class="chart-card">
      <view class="chart-title text-title">课程类型分布</view>
      <canvas canvas-id="courseTypeChart" style="width: 100%; height: 300rpx;"></canvas>
    </view>

    <!-- 出勤率趋势 -->
    <view class="chart-card">
      <view class="chart-title text-title">出勤率趋势</view>
      <canvas canvas-id="attendanceTrendChart" style="width: 100%; height: 300rpx;"></canvas>
    </view>
  </view>

  <!-- 近期活动 -->
  <view class="recent-activities">
    <view class="section-title text-title">近期活动</view>
    <view class="activities-list">
      <block wx:if="{{recentActivities.length > 0}}">
        <view wx:for="{{recentActivities}}" wx:key="id" class="activity-item">
          <view class="activity-icon">
            <icon type="success" size="20" color="#07c160"></icon>
          </view>
          <view class="activity-content">
            <view class="activity-title">{{item.courseName}}</view>
            <view class="activity-info">
              <text>{{item.date}}</text>
              <text>{{item.status === 'attended' ? '已签到' : '已预约'}}</text>
            </view>
          </view>
        </view>
      </block>
      <view wx:else class="empty-state">
        <text>暂无活动记录</text>
      </view>
    </view>
  </view>
</view>